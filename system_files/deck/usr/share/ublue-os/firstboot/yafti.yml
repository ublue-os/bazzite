title: Welcome to uBlue
properties:
  mode: "run-on-change"
screens:
  first-screen:
    source: yafti.screen.title
    values:
      title: "Welcome to Bazzite (Steam Deck)"
      icon: "/path/to/icon"
      description: |
        Pick some applications to get started
  can-we-modify-your-flatpaks:
    source: yafti.screen.consent
    values:
      title: Setting up Flathub
      condition:
        run: flatpak remotes --system | grep fedora
      description: |
        WARNING: This will modify your Flatpaks if you are rebasing! If you do not want to do this exit the installer.
      actions:
      - run: /usr/lib/fedora-third-party/fedora-third-party-opt-out
      - run: /usr/bin/fedora-third-party disable
      - run: flatpak remote-delete fedora --force
      - run: flatpak remove --system --noninteractive --all
      - run: flatpak remote-add --if-not-exists --user flathub https://flathub.org/repo/flathub.flatpakrepo
  applications:
    source: yafti.screen.package
    values:
      title: Application Installation
      show_terminal: true
      package_manager: yafti.plugin.flatpak
      groups:
        Bazzite:
          description: Core Applications
          default: true
          packages:
          - MangoHud (Flatpak): org.freedesktop.Platform.VulkanLayer.MangoHud//22.08
          - Mozilla Firefox: org.mozilla.firefox
          - Protontricks: com.github.Matoking.protontricks
          - ProtonUp-Qt (Proton Updater): net.davidotek.pupgui2
          - vkBasalt (Flatpak): org.freedesktop.Platform.VulkanLayer.vkBasalt//22.08
        Web Browsers:
          description: Additional browsers to complement Firefox
          default: false
          packages:
          - Brave: com.brave.Browser
          - Google Chrome: com.google.Chrome
          - LibreWolf: io.gitlab.librewolf-community
          - Microsoft Edge: com.microsoft.Edge
          - Opera: com.opera.Opera
        Gaming:
          description: "Rock and Stone!"
          default: false
          packages:
          - Bottles: com.usebottles.bottles
          - Chiaki4Deck (PlayStation Remote Play): just get-chiaki
          - Discord: com.discordapp.Discord
          - GeForce NOW Electron: io.github.hmlendea.geforcenow-electron
          - Heroic Games Launcher (GOG &amp; Epic): com.heroicgameslauncher.hgl
          - itch: io.itch.itch
          - Minecraft (Prism Launcher): org.prismlauncher.PrismLauncher
          - Minecraft Bedrock Launcher: io.mrarm.mcpelauncher
          - Moonlight: com.moonlight_stream.Moonlight
          - Mumble: info.mumble.Mumble
          - OpenMW: org.openmw.OpenMW
          - Steam Link: com.valvesoftware.SteamLink
          - SuperTux: org.supertuxproject.SuperTux
          - SuperTuxKart: net.supertuxkart.SuperTuxKart
          - TeamSpeak: com.teamspeak.TeamSpeak
        Emulation:
          description: Play games like it's 1972 (Leave these all unchecked if you're planning to use EmuDeck)
          default: false
          packages:
          - Cemu: info.cemu.Cemu
          - Citra: org.citra_emu.citra
          - Dolphin: org.DolphinEmu.dolphin-emu
          - DuckStation: org.duckstation.DuckStation
          - MAME: org.mamedev.MAME
          - melonDS: net.kuribo64.melonDS
          - mGBA: io.mgba.mGBA
          - PCSX2: net.pcsx2.PCSX2
          - PPSSPP: org.ppsspp.PPSSPP
          - RetroArch: org.libretro.RetroArch
          - RetroDECK: net.retrodeck.retrodeck
          - Rosalie's Mupen GUI: com.github.Rosalie241.RMG
          - RPCS3: net.rpcs3.RPCS3
          - Ryujinx: org.ryujinx.Ryujinx
          - ScummVM: org.scummvm.ScummVM
          - Snes9x: om.snes9x.Snes9x
          - xemu: app.xemu.xemu
          - yuzu: org.yuzu_emu.yuzu
        Streaming:
          description: Stream to the Internet
          default: false
          packages:
          - OBS Studio: com.obsproject.Studio
          - OBSVkCapture Layer: org.freedesktop.Platform.VulkanLayer.OBSVkCapture
          - OBSVkCapture Plugin: com.obsproject.Studio.Plugin.OBSVkCapture
          - Gstreamer for OBS: com.obsproject.Studio.Plugin.Gstreamer
          - Gstreamer VAAPI for OBS: com.obsproject.Studio.Plugin.GStreamerVaapi
          - Boatswain for Streamdeck: com.feaneron.Boatswain
        Music:
          description: "Rock and Roll!"
          default: false
          packages:
          - Spotify: com.spotify.Client
          - Strawberry Music Player: org.strawberrymusicplayer.strawberry
          - Tidal-hifi: com.mastermindzh.tidal-hifi
        Office:
          description: Bow to Capitalism
          default: false
          packages:
          - Joplin: net.cozic.joplin_desktop
          - LibreOffice: org.libreoffice.LibreOffice
          - Obsidian: md.obsidian.Obsidian
          - OnlyOffice: org.onlyoffice.desktopeditors
          - Slack: com.slack.Slack
          - Standard Notes: org.standardnotes.standardnotes
          - Thunderbird Email: org.mozilla.Thunderbird
          - Xournal++: flathub com.github.xournalpp.xournalpp
        Utilities:
          description: Helpful tools
          default: false
          packages:
          - Barrier: com.github.debauchee.barrier
          - Bitwarden: com.bitwarden.desktop
          - Calibre: com.calibre_ebook.calibre
          - Fedora Media Writer: org.fedoraproject.MediaWriter
          - Flatseal Permissions Manager: com.github.tchx84.Flatseal
          - GIMP: org.gimp.GIMP
          - KeePassXC: org.keepassxc.KeePassXC
          - qBittorrent: org.qbittorrent.qBittorrent
          - Syncthing: com.github.zocker_160.SyncThingy
          - VLC: org.videolan.VLC
  configure-bazzite:
    source: yafti.screen.package
    values:
      title: Configure Bazzite
      show_terminal: true
      package_manager: yafti.plugin.run
      groups:
        Automatic Duplicate File Removal:
          description: Flattens duplicate files to take up no more space than a single copy, a considerable space savings for wine prefixes and compatdata
          default: true
          packages:
          - Enable Duperemove: systemctl enable --now duperemove-weekly@$(systemd-escape $HOME).timer
        Autostart Steam:
          description: Launches Steam automatically on the desktop
          default: true
          packages:
          - Enable Autostart: cp ~/usr/share/applications/steam.desktop ~/.config/autostart/steam-silent.desktop && sed -i 's@/usr/bin/steam-runtime  %U@/usr/bin/steam-runtime -silent %U@g' ~/.config/autostart/steam-silent.desktop
        Decky Loader:
          description: A plugin loader for the Steam Deck
          default: false
          packages:
          - Retrieve Decky: just get-decky
        EmuDeck:
          description: |
            A utility for installing and configuring emulators on the Steam Deck
          default: false
          packages:
          - Retrieve EmuDeck: just get-emudeck
        Gamescope Autologin:
          description: Autologin to Gamescope Session
          default: true
          packages:
          - Enable Gamescope Autologin: just enable-gamescope-autologin
        Greenlight:
          description: A utility for xCloud and xHome streaming
          default: false
          packages:
          - Retrieve Greenlight: just get-greenlight
        Kernel Arguments:
          description: Sets kernel arguments used in SteamOS
          default: true
          packages:
          - Set kargs: just set-steamos-kargs
        Memory Tuning:
          description: Adjust ZRAM and configure deckswap
          default: false
          packages:
          - Deck Swap: just swap-on
          - Disable ZRAM: just zram-off
        Nix Package Manager:
          description: Nix is a powerful package manager for Linux and other Unix systems that makes package management reliable and reproducible
          default: true
          packages:
          - Install Nix Package Support: just install-nix
        SteamDeckGyroDSU:
          description: Allows emulators and other applications to receive Steam Deck gyro motion data
          default: true
          packages:
          - Enable SDGyroDSU Service: systemctl --user enable --now sdgyrodsu
        Steam Desktop Shortcuts:
          description: Creates Steam desktop shortcuts
          default: true
          packages:
          - Create Steam shortcuts: just create-steam-shortcuts
        Wallpaper Engine:
          description: Enables Wallpaper Engine
          default: true
          packages:
          - Enable Wallpaper Engine: just enable-wallpaper-engine
  final-screen:
    source: yafti.screen.title
    values:
      title: "All done!"
      icon: "/path/to/icon"
      links:
      - "Install More Applications":
          run: /usr/bin/plasma-discover
      - "Website":
          run: /usr/bin/xdg-open https://ublue.it
      - "Join the Discord Community":
          run: /usr/bin/xdg-open https://discord.gg/XjG48C7VHx
      description: |
        Thank you for trying Bazzite, we hope you enjoy it!
